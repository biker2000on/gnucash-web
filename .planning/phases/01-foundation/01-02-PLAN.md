---
phase: 01-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [package.json, vitest.config.ts, src/__tests__/setup.ts]
autonomous: true

must_haves:
  truths:
    - "npm test command executes Vitest"
    - "Test environment supports React component testing (jsdom)"
    - "Vitest recognizes project path aliases (@/*)"
  artifacts:
    - path: "vitest.config.ts"
      provides: "Vitest configuration with Next.js support"
    - path: "src/__tests__/setup.ts"
      provides: "Global test setup and mocks"
  key_links:
    - from: "vitest.config.ts"
      to: "vite-tsconfig-paths"
      via: "plugin"
---

<objective>
Set up Vitest and React Testing Library for comprehensive unit and integration testing.

Purpose: Establish a reliable testing foundation for the migration and future feature development.
Output: Configured test runner and initial smoke tests.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install and Configure Vitest</name>
  <files>package.json, vitest.config.ts</files>
  <action>
    1. Install vitest, @vitejs/plugin-react, jsdom, @testing-library/react, @testing-library/dom, vite-tsconfig-paths.
    2. Create vitest.config.ts with React and tsconfig paths plugins.
    3. Update package.json to include "test": "vitest".
  </action>
  <verify>npm test -- --version returns Vitest version</verify>
  <done>Vitest is installed and basic config is in place.</done>
</task>

<task type="auto">
  <name>Task 2: Global Test Setup and Smoke Test</name>
  <files>src/__tests__/setup.ts, src/__tests__/smoke.test.ts</files>
  <action>
    1. Create src/__tests__/setup.ts for global mocks (e.g., IntersectionObserver).
    2. Create a simple smoke test in src/__tests__/smoke.test.ts that verifies the test environment works.
  </action>
  <verify>npm test runs and passes the smoke test</verify>
  <done>Testing infrastructure is verified with a passing test.</done>
</task>

</tasks>

<verification>
Run npm test and ensure the smoke test passes.
</verification>

<success_criteria>
Vitest is configured and can run tests in the project.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
