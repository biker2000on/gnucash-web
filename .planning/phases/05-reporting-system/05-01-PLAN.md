---
phase: 05-reporting-system
plan: 01
type: execute
wave: 1
depends_on: [03-03-PLAN.md]
files_modified: [src/app/(main)/reports/page.tsx, src/components/reports/ReportViewer.tsx, src/components/reports/ReportFilters.tsx, src/lib/reports/types.ts]
autonomous: true

must_haves:
  truths:
    - "Report selector page lists available reports"
    - "Common report wrapper handles filters and layout"
    - "Date range selection works consistently"
    - "Report framework is extensible"
  artifacts:
    - path: "src/app/(main)/reports/page.tsx"
      provides: "Report index page"
    - path: "src/components/reports/ReportViewer.tsx"
      provides: "Common report container"
    - path: "src/lib/reports/types.ts"
      provides: "Report type definitions"
  key_links:
    - from: "src/app/(main)/reports/page.tsx"
      to: "src/components/reports/ReportViewer.tsx"
      via: "component import"
---

<objective>
Create the reporting framework and base UI.

Purpose: Establish consistent patterns for all financial reports.
Output: Report selector, viewer wrapper, and filter components.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/05-reporting-system/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Create Report Type Definitions</name>
  <files>src/lib/reports/types.ts</files>
  <action>
    Define TypeScript interfaces:
    - ReportType enum (BALANCE_SHEET, INCOME_STATEMENT, CASH_FLOW, etc.)
    - ReportConfig: { type, name, description, icon }
    - ReportFilters: { startDate, endDate, compareToDate?, accountTypes? }
    - ReportData: Generic interface for report results
    - LineItem: { guid, name, amount, children? }
  </action>
  <verify>Types export correctly</verify>
  <done>Report types defined.</done>
</task>

<task type="auto">
  <name>Create ReportFilters Component</name>
  <files>src/components/reports/ReportFilters.tsx</files>
  <action>
    Create filter bar with:
    - Date range picker (start/end)
    - Quick presets: This Month, Last Month, This Quarter, This Year, Last Year
    - Compare to previous period toggle
    - Account type filter (optional, for custom reports)
    - Apply/Reset buttons

    Emit filter changes via callback prop.
    Store last used filters in localStorage.
  </action>
  <verify>Filters render and emit changes</verify>
  <done>ReportFilters provides date selection.</done>
</task>

<task type="auto">
  <name>Create ReportViewer Component</name>
  <files>src/components/reports/ReportViewer.tsx</files>
  <action>
    Create wrapper component that:
    - Displays report title and description
    - Includes ReportFilters
    - Shows loading state
    - Renders children (the actual report)
    - Export button bar (PDF, Excel, CSV)
    - Print button
    - Responsive layout

    Props: title, description, filters, onFilterChange, children, isLoading
  </action>
  <verify>Component renders with child content</verify>
  <done>ReportViewer wraps reports consistently.</done>
</task>

<task type="auto">
  <name>Create Reports Index Page</name>
  <files>src/app/(main)/reports/page.tsx</files>
  <action>
    Create page showing:
    - Grid of report cards
    - Each card: Icon, title, description, link to report
    - Categories: Financial Statements, Account Reports, Transaction Reports
    - Add navigation link in sidebar

    Reports to list:
    - Balance Sheet
    - Income Statement (P&L)
    - Cash Flow Statement
    - Account Summary
    - Transaction Report
  </action>
  <verify>Page shows report selector grid</verify>
  <done>Reports index page complete.</done>
</task>

</tasks>

<verification>
- Reports page lists available reports
- Filter component works
- ReportViewer provides consistent layout
</verification>

<success_criteria>
Report framework established and ready for specific reports.
</success_criteria>

<output>
After completion, create `.planning/phases/05-reporting-system/05-01-SUMMARY.md`
</output>
